<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module forecast</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>forecast</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/jakehofgard/PycharmProjects/peaktemp/peaktemp/forecast.py">/Users/jakehofgard/PycharmProjects/peaktemp/peaktemp/forecast.py</a></font></td></tr></table>
    <p><tt>#&nbsp;Plotting&nbsp;and&nbsp;data&nbsp;processing</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="pandas.html">pandas</a><br>
</td><td width="25%" valign=top><a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
</td><td width="25%" valign=top><a href="xgboost.html">xgboost</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-calculate_peaks"><strong>calculate_peaks</strong></a>(df, level, length=30, start_year=2005, return_winter=False)</dt><dd><tt>Computes&nbsp;the&nbsp;&nbsp;1-in-level&nbsp;forecast&nbsp;for&nbsp;an&nbsp;input&nbsp;DataFrame<br>
Parameters<br>
----------<br>
df:&nbsp;pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;input&nbsp;data&nbsp;for&nbsp;the&nbsp;forecast;&nbsp;the&nbsp;output&nbsp;forecast.combine_models<br>
level:&nbsp;float<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;level&nbsp;of&nbsp;the&nbsp;forecast&nbsp;(i.e.,&nbsp;1-in-2,&nbsp;1-in-10,&nbsp;etc.).&nbsp;Must&nbsp;be&nbsp;greater&nbsp;than&nbsp;1<br>
length:&nbsp;int<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;length&nbsp;of&nbsp;data&nbsp;used&nbsp;for&nbsp;forecasting;&nbsp;30&nbsp;years&nbsp;by&nbsp;default<br>
start_year:&nbsp;int<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;start&nbsp;year&nbsp;of&nbsp;the&nbsp;forecast&nbsp;(can&nbsp;be&nbsp;in&nbsp;the&nbsp;past);&nbsp;2005&nbsp;by&nbsp;default<br>
return_winter:&nbsp;bool<br>
&nbsp;&nbsp;&nbsp;&nbsp;Indicates&nbsp;whether&nbsp;to&nbsp;return&nbsp;winter&nbsp;peaks&nbsp;in&nbsp;addition&nbsp;to&nbsp;summer&nbsp;peaks;&nbsp;False&nbsp;by&nbsp;default<br>
Returns<br>
-------<br>
pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;DataFrame&nbsp;containing&nbsp;the&nbsp;peak&nbsp;temperature&nbsp;forecast<br>
Examples<br>
--------<br>
<a href="#-fit_entire_profile">fit_entire_profile</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;df=combined_models,<br>
&nbsp;&nbsp;&nbsp;&nbsp;level=2<br>
)</tt></dd></dl>
 <dl><dt><a name="-combine_models"><strong>combine_models</strong></a>(isd_data, fitted_models, return_winter=False)</dt><dd><tt>Computes&nbsp;the&nbsp;temperatures&nbsp;each&nbsp;year&nbsp;(both&nbsp;winter&nbsp;and&nbsp;summer)&nbsp;that&nbsp;will&nbsp;result&nbsp;in&nbsp;peak&nbsp;load&nbsp;from&nbsp;a&nbsp;single&nbsp;timeseries<br>
Parameters<br>
----------<br>
isd_data:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;historical&nbsp;hourly&nbsp;temperature&nbsp;profiles<br>
fitted_models:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;fit&nbsp;hourly&nbsp;profiles&nbsp;for&nbsp;a&nbsp;set&nbsp;of&nbsp;climate&nbsp;models<br>
return_winter:&nbsp;bool<br>
&nbsp;&nbsp;&nbsp;&nbsp;Indicates&nbsp;whether&nbsp;to&nbsp;return&nbsp;winter&nbsp;peaks&nbsp;in&nbsp;addition&nbsp;to&nbsp;summer&nbsp;peaks;&nbsp;False&nbsp;by&nbsp;default<br>
Returns<br>
-------<br>
pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;DataFrame&nbsp;containing&nbsp;seasonal&nbsp;peak&nbsp;temperatures&nbsp;for&nbsp;all&nbsp;models<br>
Examples<br>
--------<br>
<a href="#-fit_entire_profile">fit_entire_profile</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;isd_data=isd_data,<br>
&nbsp;&nbsp;&nbsp;&nbsp;fitted_models=fitted_models<br>
)</tt></dd></dl>
 <dl><dt><a name="-extract_dt_info"><strong>extract_dt_info</strong></a>(df)</dt><dd><tt>Reformats&nbsp;DataFrames&nbsp;with&nbsp;necessary&nbsp;DateTime&nbsp;information<br>
Parameters<br>
----------<br>
df:&nbsp;pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;input&nbsp;DataFrame.<br>
Returns<br>
-------<br>
pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;updated&nbsp;DataFrame&nbsp;with&nbsp;all&nbsp;desired&nbsp;fields.</tt></dd></dl>
 <dl><dt><a name="-fit_entire_profile"><strong>fit_entire_profile</strong></a>(isd_data, daily_extremes, model_data)</dt><dd><tt>Given&nbsp;model&nbsp;data,&nbsp;fit&nbsp;hourly&nbsp;profiles&nbsp;to&nbsp;the&nbsp;entire&nbsp;timeframe<br>
Parameters<br>
----------<br>
isd_data:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;hourly&nbsp;profiles;&nbsp;the&nbsp;output&nbsp;of&nbsp;data.download_isd_profiles<br>
daily_extremes:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;daily&nbsp;extrema;&nbsp;the&nbsp;output&nbsp;of&nbsp;data.get_daily_extrema<br>
model_data:&nbsp;pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;DataFrame&nbsp;containing&nbsp;CMIP6&nbsp;model&nbsp;data;&nbsp;the&nbsp;output&nbsp;of&nbsp;data.extract_cmip6_data<br>
Returns<br>
-------<br>
pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;DataFrame&nbsp;containing&nbsp;the&nbsp;entire&nbsp;set&nbsp;of&nbsp;hourly&nbsp;temperature&nbsp;profiles&nbsp;for&nbsp;the&nbsp;given&nbsp;model<br>
Examples<br>
--------<br>
<a href="#-fit_entire_profile">fit_entire_profile</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;isd_data=isd_data,<br>
&nbsp;&nbsp;&nbsp;&nbsp;daily_extremes=daily_extremes,<br>
&nbsp;&nbsp;&nbsp;&nbsp;model_data=model_data<br>
)</tt></dd></dl>
 <dl><dt><a name="-fit_multiple_profiles"><strong>fit_multiple_profiles</strong></a>(isd_data, daily_extremes, climate_models)</dt><dd><tt>Given&nbsp;a&nbsp;set&nbsp;models,&nbsp;fit&nbsp;hourly&nbsp;profiles&nbsp;to&nbsp;each&nbsp;model<br>
Parameters<br>
----------<br>
isd_data:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;hourly&nbsp;profiles;&nbsp;the&nbsp;output&nbsp;of&nbsp;data.download_isd_profiles<br>
daily_extremes:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;daily&nbsp;extrema;&nbsp;the&nbsp;output&nbsp;of&nbsp;data.get_daily_extrema<br>
climate_models:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;CMIP6&nbsp;model&nbsp;data;&nbsp;the&nbsp;output&nbsp;of&nbsp;data.aggregate_cmip6_data<br>
Returns<br>
-------<br>
dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;full&nbsp;hourly&nbsp;profiles&nbsp;for&nbsp;each&nbsp;model&nbsp;in&nbsp;climate_models<br>
Examples<br>
--------<br>
<a href="#-fit_entire_profile">fit_entire_profile</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;isd_data=isd_data,<br>
&nbsp;&nbsp;&nbsp;&nbsp;daily_extremes=daily_extremes,<br>
&nbsp;&nbsp;&nbsp;&nbsp;climate_models=climate_models<br>
)</tt></dd></dl>
 <dl><dt><a name="-forecast_xgboost"><strong>forecast_xgboost</strong></a>(isd_data, fitted_models, season='summer', show_importance=False, path='xgb_importance_plot.png')</dt><dd><tt>Produces&nbsp;a&nbsp;forecast&nbsp;for&nbsp;peak&nbsp;temperatures&nbsp;using&nbsp;XGBoost,&nbsp;with&nbsp;standard&nbsp;hyperparameters<br>
Parameters<br>
----------<br>
isd_data:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;historical&nbsp;hourly&nbsp;temperature&nbsp;profiles<br>
fitted_models:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;fit&nbsp;hourly&nbsp;profiles&nbsp;for&nbsp;a&nbsp;set&nbsp;of&nbsp;climate&nbsp;models<br>
season:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;desired&nbsp;season&nbsp;for&nbsp;forecasting;&nbsp;must&nbsp;be&nbsp;either&nbsp;summer&nbsp;or&nbsp;winter.&nbsp;Set&nbsp;to&nbsp;summer&nbsp;by&nbsp;default<br>
show_importance:&nbsp;bool<br>
&nbsp;&nbsp;&nbsp;&nbsp;Indicates&nbsp;whether&nbsp;to&nbsp;produce&nbsp;an&nbsp;XGBoost&nbsp;importance&nbsp;plot,&nbsp;showing&nbsp;the&nbsp;importance&nbsp;of&nbsp;each&nbsp;feature&nbsp;in&nbsp;the&nbsp;regression&nbsp;model<br>
path:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;show_importance&nbsp;is&nbsp;True,&nbsp;the&nbsp;resulting&nbsp;figure&nbsp;will&nbsp;be&nbsp;saved&nbsp;here<br>
Returns<br>
-------<br>
pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;DataFrame&nbsp;containing&nbsp;an&nbsp;XGBoost&nbsp;forecast&nbsp;for&nbsp;peak&nbsp;temperatures&nbsp;in&nbsp;future&nbsp;years<br>
Examples<br>
--------<br>
<a href="#-fit_entire_profile">fit_entire_profile</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;isd_data=isd_data,<br>
&nbsp;&nbsp;&nbsp;&nbsp;fitted_models=fitted_models<br>
)</tt></dd></dl>
 <dl><dt><a name="-get_seasonal_peaks"><strong>get_seasonal_peaks</strong></a>(df, winter_peak_hrs=(7, 8, 9, 10, 17, 18), summer_peak_hrs=(16, 17, 18, 19, 20))</dt><dd><tt>Computes&nbsp;the&nbsp;temperatures&nbsp;each&nbsp;year&nbsp;(both&nbsp;winter&nbsp;and&nbsp;summer)&nbsp;that&nbsp;will&nbsp;result&nbsp;in&nbsp;peak&nbsp;load<br>
Parameters<br>
----------<br>
df:&nbsp;pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;DataFrame&nbsp;containing&nbsp;an&nbsp;hourly&nbsp;temperature&nbsp;profile<br>
winter_peak_hrs:&nbsp;tuple<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;tuple&nbsp;of&nbsp;hours&nbsp;corresponding&nbsp;to&nbsp;winter&nbsp;peaking&nbsp;hours&nbsp;(between&nbsp;0&nbsp;and&nbsp;23)<br>
summer_peak_hrs:&nbsp;tuple<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;tuple&nbsp;of&nbsp;hours&nbsp;corresponding&nbsp;to&nbsp;summer&nbsp;peaking&nbsp;hours&nbsp;(between&nbsp;0&nbsp;and&nbsp;23)<br>
Returns<br>
-------<br>
pd.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;DataFrame&nbsp;containing&nbsp;seasonal&nbsp;peak&nbsp;temperatures&nbsp;for&nbsp;each&nbsp;year<br>
Examples<br>
--------<br>
<a href="#-fit_entire_profile">fit_entire_profile</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;df=fitted_profiles['cnrm_esm2_1']<br>
)</tt></dd></dl>
 <dl><dt><a name="-plot_full_forecast"><strong>plot_full_forecast</strong></a>(isd_data, fitted_models, season='summer', title='Historical and Forecasted Peaking Temperatures', path='full_forecast.png')</dt><dd><tt>Produces&nbsp;a&nbsp;forecast&nbsp;for&nbsp;peak&nbsp;temperatures&nbsp;using&nbsp;XGBoost,&nbsp;with&nbsp;standard&nbsp;hyperparameters<br>
Parameters<br>
----------<br>
isd_data:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;historical&nbsp;hourly&nbsp;temperature&nbsp;profiles<br>
fitted_models:&nbsp;dict<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;fit&nbsp;hourly&nbsp;profiles&nbsp;for&nbsp;a&nbsp;set&nbsp;of&nbsp;climate&nbsp;models<br>
season:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;desired&nbsp;season&nbsp;for&nbsp;forecasting;&nbsp;must&nbsp;be&nbsp;either&nbsp;summer&nbsp;or&nbsp;winter.&nbsp;Set&nbsp;to&nbsp;summer&nbsp;by&nbsp;default<br>
title:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;plot&nbsp;title&nbsp;to&nbsp;display<br>
path:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;path&nbsp;for&nbsp;the&nbsp;resulting&nbsp;plot<br>
Returns<br>
-------<br>
None<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;plot&nbsp;will&nbsp;be&nbsp;displayed&nbsp;and&nbsp;saved&nbsp;to&nbsp;the&nbsp;specified&nbsp;path.<br>
Examples<br>
--------<br>
<a href="#-plot_full_forecast">plot_full_forecast</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;isd_data=isd_data,<br>
&nbsp;&nbsp;&nbsp;&nbsp;fitted_models=fitted_models<br>
)</tt></dd></dl>
</td></tr></table>
</body></html>